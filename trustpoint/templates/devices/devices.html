{% extends 'trustpoint/base.html' %}
{% load i18n %}
{% load static %}

{% block content %}

<div class="card" style="max-height: 100%; display: flex; flex-direction: column;">
  <div class="card-header">
      <h1>{% trans 'Devices' %}</h1>
  </div>

  {% include 'devices/table_filter.html' with table_url='devices:devices' %}

  {# --- Main table + pagination --- #}
  <div class="card-body text-start pt-0" style="overflow: auto; flex-grow: 1; max-height: 90%;">
    {% include 'devices/devices_table.html' %}
    {% include 'trustpoint/pagination.html' %}
  </div>

  {# --- Footer actions from main --- #}
  <div class="card-footer d-flex flex-column flex-md-row justify-content-between tp-sticky-footer">
   <div class="m-1 d-flex flex-wrap gap-2">
    <button type="button" class="btn btn-danger tp-table-select-btn me-2"
            data-tp-url="{{ device_revoke_url }}">
      {% trans 'Revoke selected' %}
    </button>

    <button type="button" class="btn btn-danger tp-table-select-btn me-2"
            data-tp-url="{{ device_delete_url }}">
      {% trans 'Delete selected' %}
    </button>
  </div>

  <div class="m-1 d-flex flex-wrap justify-content-md-end gap-2">
      <a class="btn btn-primary" href="{% url new_onboarding_url %}">
      {% trans "Add Onboarding" %}
    </a>
      <a class="btn btn-primary" href="{% url create_url %}">
      {% trans "Create New Device" %}
    </a>

  </div>
</div>

{% endblock content %}
