{% extends 'trustpoint/base.html' %}
{% load static %}
{% load i18n %}

{% block content %}
<div class="card">
  <div class="card-header">
    <div class="d-flex justify-content-between align-items-center">
      <h1 class="mb-0">{% trans 'Workflow Instance Details' %}</h1>

      <div class="d-flex gap-2">
        {% if runtime_catalog_url %}
          <a class="btn btn-outline-secondary btn-sm"
             href="{{ runtime_catalog_url }}"
             target="_blank"
             rel="noopener">
            {% trans 'Runtime context (JSON)' %}
          </a>
        {% endif %}
      </div>
    </div>
  </div>

  <div class="card-body">

    {% include "workflows/instance_detail/_summary.html" %}

    <hr>
    {% include "workflows/instance_detail/_request_common.html" %}

    {% if enr %}
      <hr>
      {% include "workflows/instance_detail/_enrollment_request.html" %}
    {% endif %}

    {% if dr %}
      <hr>
      {% include "workflows/instance_detail/_device_request.html" %}
    {% endif %}

    <hr>
    {% include "workflows/instance_detail/_steps.html" %}

    <hr>
    {% include "workflows/instance_detail/_history.html" %}

    {% if csr_info or csr_pem %}
      <hr>
      {% include "workflows/instance_detail/_csr.html" %}
    {% endif %}

    <hr>
    {% include "workflows/instance_detail/_actions.html" %}

  </div>
</div>
{% endblock %}
