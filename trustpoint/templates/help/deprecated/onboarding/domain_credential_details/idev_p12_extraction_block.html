{% load i18n %}
{% load static %}

{% block head %}
    <script src="{% static 'js/copy_clipboard.js' %}"></script>
{% endblock head %}

{% block cmp_idev_p12_extraction %}
    <ul class="tp-kvp-list">
        <li>
            <div>
                If only a .p12 or .pfx file is available, you need to extract the certificate and
                private key to use it with the OpenSSL CMP command.
            </div>
            <div>idevid.p12</div>
        </li>
        <li>
            <div>{% trans 'PKCS#12 IDevID Certificate Extraction' %}</div>
            <div class="copy-container" style="position: relative;">
                <code class="command-text language-bash">
                    openssl pkcs12 -in idevid.p12 -clcerts -nokeys -out idevid.pem
                </code>

                <button type="button" class="copy-button" data-tooltip="Copy to clipboard"
                        aria-label="Copy to clipboard">
                    <svg class="icon icon-copy" width="40" height="40" fill="currentColor">
                        <use href="{% static 'img/icons.svg' %}#icon-copy"></use>
                    </svg>
                </button>
            </div>
        </li>
        <li>
            <div>{% trans 'PKCS#12 IDevID Certificate Chain Extraction' %}</div>
            <div class="copy-container" style="position: relative;">
                <code class="command-text language-bash">
                    openssl pkcs12 -in idevid.p12 -cacerts -nokeys -chain -out idevid_chain.pem
                </code>

                <button type="button" class="copy-button" data-tooltip="Copy to clipboard"
                        aria-label="Copy to clipboard">
                    <svg class="icon icon-copy" width="40" height="40" fill="currentColor">
                        <use href="{% static 'img/icons.svg' %}#icon-copy"></use>
                    </svg>
                </button>
            </div>
        </li>
        <li>
            <div>{% trans 'PKCS#12 IDevID Private Key Extraction' %}</div>
            <div class="copy-container" style="position: relative;">
                <code class="command-text language-bash">
                    openssl pkcs12 -in idevid.p12 -out idevid.key -nodes -nocerts
                </code>

                <button type="button" class="copy-button" data-tooltip="Copy to clipboard"
                        aria-label="Copy to clipboard">
                    <svg class="icon icon-copy" width="40" height="40" fill="currentColor">
                        <use href="{% static 'img/icons.svg' %}#icon-copy"></use>
                    </svg>
                </button>
            </div>
        </li>
        <li>
            <div>Remarks</div>
            <div>{% trans 'Please make sure that the root CA certificate is not included in the chain. If it is, you should remove it manually, e.g. using a text editor.' %}</div>
        </li>
    </ul>

{% endblock cmp_idev_p12_extraction %}
